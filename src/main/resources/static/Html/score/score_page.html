<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>个人积分主页</title>
    <script src="../../js/CommonTool.js"></script>
    <script src="https://cdn.staticfile.org/jquery/1.10.2/jquery.min.js"></script>
    <script src="../../js/Config.js"></script>

</head>
<body>
<h2>账户名：</h2>
<br>
<input id="user_acc" value="123" style="width: 150px; height: 40px; font-size: 30px" readonly>
<br>
<h2>用户名:</h2>
<br>
<input id="user_name" value="罗继业" style="width: 150px; height: 40px; font-size: 30px" readonly>
<br>
<h2>积分值：</h2>
<input id="user_score" value="---" style="width: 150px; height: 40px; font-size: 30px" readonly>
<br><br>
<input type="submit" id="btn_score_deduct" value="扣除积分"
       style="width: 150px; height: 40px; font-size: 25px">
<br><br>
<input type="submit" id="btn_score_add" value="增加积分"
       style="width: 150px; height: 40px; font-size: 25px">
<br><br>
<input type="button" id="btn_score_record" value="查看积分使用记录"
       style="width: auto; height: 40px; font-size: 25px">

</body>
<script>
    var userinfo = {};
    userinfo.user_acc = $("#user_acc").val();

    $.post("http://localhost:8099/scoreShow",userinfo,function (data) {
        console.info(data.user_gold);

        $("#user_score").attr("value",data.user_gold);
        //alert(data);
    });
    userinfo.user_name=$("#user_name").val();
    console.info(userinfo);

    $("#btn_score_deduct").click(function () {
        var operate_value=prompt("请输入要扣除的积分数额：");
        if(operate_value!=null&&operate_value!==""&&operate_value>0)
        {
            userinfo.operate_value=operate_value;
            $.post("http://localhost:8099/scoreDeduct",userinfo,function (data) {
                console.info(data);
                if(data.code=="100")
                    alert("积分扣除成功！当前积分为："+data.current_value);

                $("#user_score").attr("value",data.current_value);
            })
        }
        console.info(userinfo.operate_value);
    })

    $("#btn_score_add").click(function () {
        var operate_value=prompt("请输入要增加的积分数额：");
        if(operate_value!=null&&operate_value!==""&&operate_value>0)
        {
            userinfo.operate_value=operate_value;
            $.post("http://localhost:8099/scoreAdd",userinfo,function (data) {
                console.info(data);
                if(data.code=="100")
                    alert("积分增加成功！当前积分为："+data.current_value);

                $("#user_score").attr("value",data.current_value);
            })
        }
        console.info(userinfo.operate_value);
    })

    $("#btn_score_record").click(function () {
        $.post("http://localhost:8099/getScoreRecord",function (data) {
            console.info(data);

            /**/
        })

    })
</script>
</html>